## ----highlight=TRUE------------------------------------------------------
x=5

## ------------------------------------------------------------------------
x

## ----error=TRUE----------------------------------------------------------
X

## ----error=TRUE,eval=FALSE-----------------------------------------------
## 1.more=2.34

## ------------------------------------------------------------------------
one.more=2.34
onemorerobject=2.34

## ------------------------------------------------------------------------
x="Hadley Wickham"

## ------------------------------------------------------------------------
x

## ------------------------------------------------------------------------
x=TRUE
x

## ----error=TRUE----------------------------------------------------------
x=True

## ------------------------------------------------------------------------
x=F
x

## ------------------------------------------------------------------------
x="bunny"
y=F
z=4.5
class(x)
class(y)
class(z)

## ------------------------------------------------------------------------
v1="23.45"
class(v1)

## ------------------------------------------------------------------------
v2=as.numeric(v1)
class(v2)

## ------------------------------------------------------------------------
v1="King"
class(v1)
v2=as.numeric(v1)
v2

## ------------------------------------------------------------------------
?sum

## ------------------------------------------------------------------------
## Pass a vector to sum, and it will add the elements together.
sum(1:5)

## ------------------------------------------------------------------------
?smu

## ------------------------------------------------------------------------
??smu

## ------------------------------------------------------------------------
x=2
y=8
x+y
x-y
x*y
x/y

## ------------------------------------------------------------------------
x^y
x**y

## ------------------------------------------------------------------------
(x+y-(x/y))**(x/10)

## ------------------------------------------------------------------------
z=(x+y-(x/y))**(x/10)
z

## ------------------------------------------------------------------------
tan(10)
log(2^14,10)
log(2^14)
log(2^14,2)

## ------------------------------------------------------------------------
x="Sachin"
y="Tendulkar"
z="Cricket"
paste(x,y,z)

## ------------------------------------------------------------------------
name=paste(x,y)
profile=paste(name,z,sep=":")
profile

## ------------------------------------------------------------------------
paste(x,y,z,sep="$")
paste(x,y,z,sep="%2")

## ------------------------------------------------------------------------
address="1612-Lone Tower-Mumbai"
newAd=sub("-","/",address)

## ------------------------------------------------------------------------
newAd

## ------------------------------------------------------------------------
newAd=sub("-","/",newAd)
newAd

## ------------------------------------------------------------------------
newAd1=gsub("-","/",address)
newAd1

## ------------------------------------------------------------------------
ip=" 192.168.23.134:219"
# Anything between quotes is a string. Doesn't matter if you see numbers here
port=substr(ip,17,20)
port

## ------------------------------------------------------------------------
x="Sa  chin-$.  ?/"
nchar(x)

## ------------------------------------------------------------------------
x=7
y=9
x>y
x<y
x==y

## ------------------------------------------------------------------------
z=x>y
z

## ------------------------------------------------------------------------
x=10
x>=1 & x<=19
y="SAchin"
y=="Sachin" | y=="SACHIN"

## ------------------------------------------------------------------------
x=c(2,4,89,-10,5,6)
is.vector(x)

## ------------------------------------------------------------------------
class(x)

## ------------------------------------------------------------------------
x
x[3]

## ------------------------------------------------------------------------
z=x[c(1,2,5)]
is.vector(z)

## ------------------------------------------------------------------------
x[c(3,4,2,2,6,3)]

## ------------------------------------------------------------------------
x[c(2,3,8,5,4,9)]

## ------------------------------------------------------------------------
x
x[-2]

## ------------------------------------------------------------------------
x[-c(2,3,6)]

## ------------------------------------------------------------------------
x[c(4,5,4,40,1,1,2,3,10,2,1,4,6)]

## ----error=T-------------------------------------------------------------
x[c(2,3,-1)]

## ------------------------------------------------------------------------
x
L=x>4
L

## ------------------------------------------------------------------------
x[L]

## ------------------------------------------------------------------------
x[x>4]

## ------------------------------------------------------------------------
x
L
!L
x[!L]

## ------------------------------------------------------------------------
x=2:10
x

## ------------------------------------------------------------------------
x=seq(1,5,by=0.8)

## ------------------------------------------------------------------------
x

## ------------------------------------------------------------------------
x=seq(1,10,length=21)
x

## ------------------------------------------------------------------------
x=1:5
y=seq(2,3,length=5)
z=c(x,y)
z

## ------------------------------------------------------------------------
rep(2,10)
rep("a",5)

## ------------------------------------------------------------------------
rep(c(1,5,6),4)

## ------------------------------------------------------------------------
rep(c("a","b"),4)
rep(c("a","b"),each=4)

## ------------------------------------------------------------------------
x=1:10
y=1:10
x+y
x*y
x-y
x/y

## ------------------------------------------------------------------------
log(x)
2**x

## ------------------------------------------------------------------------
x=1:10
y=rep("a",10)
paste(x,y,sep="")

## ------------------------------------------------------------------------
z=paste(y,x,sep="")
paste(z,collapse="+")

## ------------------------------------------------------------------------
z
f=round(runif(10),2)
f
paste(f,z,sep="*",collapse="+")

## ------------------------------------------------------------------------
x=1:10
y=c(1,2,3)

## ------------------------------------------------------------------------
#you'll get a result but with a warning for length mismatch
# However you will not get this warning if smaller vector's length is
# a multiple of larger vector
x+y

## ------------------------------------------------------------------------
paste0(c("a","b"),1:10)

## ------------------------------------------------------------------------
x=c("k","j","$","1","f")
y=letters
match(x,y)

## ------------------------------------------------------------------------
x %in% y

## ------------------------------------------------------------------------
100%%32

## ------------------------------------------------------------------------
x=2:99
which(x%%2!=0)

## ------------------------------------------------------------------------
x[which(x%%2!=0)]

## ------------------------------------------------------------------------
x=c(3,4,5,-10,1,2,0)
sort(x)
y=c("art","Ant","Bat")
sort(y)

## ------------------------------------------------------------------------
sort(x,decreasing = T)
sort(y,decreasing = T)

## ------------------------------------------------------------------------
rev(y)
rev(x)

## ------------------------------------------------------------------------
x=1:100
sample(x,3)
sample(x,3)

## ------------------------------------------------------------------------
set.seed(1)
sample(x,3)

## ------------------------------------------------------------------------
x=1:10
sample(x,7,replace=T)

## ------------------------------------------------------------------------
sample(c("a","b","c"),10,replace=T)

## ------------------------------------------------------------------------
x=sample(c("a","b"),100,replace=T,prob=c(0.3,0.7))
table(x)

## ------------------------------------------------------------------------
unique(x)

## ------------------------------------------------------------------------
x=1:10
y=rep(c("a","b"),each=6)
z=4.56

list1=list(x,y,z)
list1

## ------------------------------------------------------------------------
list1[[2]]

## ------------------------------------------------------------------------
list1[[2]][3]

## ------------------------------------------------------------------------
list2=list(num=x,char=y,single=z)
list2

## ------------------------------------------------------------------------
list2$char
list2$char[3]

## ------------------------------------------------------------------------
set.seed(2)
x=round(runif(30),2)
y=sample(c("a","b","c"),30,replace = T)
d=data.frame(x,y)
d

## ------------------------------------------------------------------------
View(d)

## ------------------------------------------------------------------------
names(d)

## ------------------------------------------------------------------------
names(d)=c("num","char")
d

## ------------------------------------------------------------------------
rownames(d)
rownames(d)=paste0("R",1:30)
d

## ------------------------------------------------------------------------
dim(d)
nrow(d)
ncol(d)

## ------------------------------------------------------------------------
str(d)

## ------------------------------------------------------------------------
d$char=as.character(d$char)
str(d)

## ------------------------------------------------------------------------
data(mtcars)
d=mtcars
dim(d)

## ------------------------------------------------------------------------
d[3,6]

## ------------------------------------------------------------------------
#3rd row , all columns
d[3,]
# all rows, 6 th colunmn
d[,6]
# multiple rows, multiple column
d[c(3,4,20),c(1,4,6)]
# Excluding rows or columns by passing indices with negative sign
d[-(3:17),-c(1,4,6,7)]
# Selecting column by their names
d[,c("wt","mpg")]
# Excluding columns by their names [ this is a little tricky because simple negative sign doesn't work]
d[,!(names(d) %in% c("wt","mpg"))]

## ------------------------------------------------------------------------
d[order(d$vs,d$wt),c("vs","wt","mpg","gear")]

## ------------------------------------------------------------------------
d[order(d$vs,-d$wt),c("vs","wt","mpg","gear")]

## ------------------------------------------------------------------------
library(dplyr)
df1 = data.frame(CustomerId=c(1:6),Product=c(rep("Toaster",3),rep("Radio",3)))
df2 = data.frame(CustomerId=c(3,4,7,8),State=c(rep("Alabama",2),rep("Ohio",2)))

inner=inner_join(df1,df2,by="CustomerId")
left=left_join(df1,df2,by="CustomerId")
right=right_join(df1,df2,by="CustomerId")
full=full_join(df1,df2,by="CustomerId")
semi=semi_join(df1,df2,by="CustomerId")
anti=anti_join(df1,df2,by="CustomerId")


## ------------------------------------------------------------------------
inner

## ------------------------------------------------------------------------
left

## ------------------------------------------------------------------------
right

## ------------------------------------------------------------------------
full

## ------------------------------------------------------------------------
semi

## ------------------------------------------------------------------------
anti

## ------------------------------------------------------------------------
x=sample(1:100,10)
for (i in 1:10){
  print(x[i]**2)
}

## ------------------------------------------------------------------------
for(j in which(x%%2==0)){
  print(x[j]**2)
}

## ------------------------------------------------------------------------
myfunc=function(x){
  range=max(x)-min(x)
  return(range)
}

myfunc(1:10)


## ----error=TRUE----------------------------------------------------------
myfunc(rep("a",10))

## ------------------------------------------------------------------------
myfunc=function(x){
if(class(x) %in% c("numeric","integer")){
    return(max(x)-min(x))
  }else{
    print("Vector is not of supported type")
  }
}
myfunc(1:10)
myfunc(rep("a",10))

## ------------------------------------------------------------------------
mysummary=function(x){
  s1=min(x)
  s2=max(x)
  s3=mean(x)
  s4=sd(x)
  s5=median(x)
  summary=list(min=s1,max=s2,mean=s3,sd=s4,median=s5)
  return(summary)
}
mysummary(2:90)

## ------------------------------------------------------------------------
t=mysummary(2:90)
t$median
t$max

## ------------------------------------------------------------------------
mysummary2=function(x,y){
  x=x*y
  s1=min(x)
  s2=max(x)
  s3=mean(x)
  s4=sd(x)
  s5=median(x)
  summary=list(min=s1,max=s2,mean=s3,sd=s4,median=s5)
  return(summary)
}
mysummary2(1:10,2)

## ----error=T-------------------------------------------------------------
mysummary2(1:10)

## ------------------------------------------------------------------------
mysummary2=function(x=2:30,y=1){
  x=x*y
  s1=min(x)
  s2=max(x)
  s3=mean(x)
  s4=sd(x)
  s5=median(x)
  summary=list(min=s1,max=s2,mean=s3,sd=s4,median=s5)
  return(summary)
}
mysummary2(1:10,4)
mysummary2(1:10)
mysummary2()

## ------------------------------------------------------------------------
mysummary2(x=1:10,y=4)
mysummary2(y=4,x=1:10)
mysummary2(y=3)
mysummary2(x=3:10)

## ------------------------------------------------------------------------
x=1:9

## ------------------------------------------------------------------------
matrix(x,3,3)

## ------------------------------------------------------------------------
n=100000
myvec=sample(1:10, n*9, TRUE)
X = as.data.frame(matrix(myvec, n, 9))

## ------------------------------------------------------------------------
head(X)

## ----eval=F--------------------------------------------------------------
## for (i in 1:nrow(X)){
## 
##     if (i > 1) {
##       if ((X[i,6] == X[i-1,6]) & (X[i,3] == X[i-1,3])) {
##         X[i,10] = X[i,9] + X[i-1,10]
##       }
##       else {
##         X[i,10] = X[i,9]
##       }
##     }
##     else {
##       X[i,10] = X[i,9]
##     }
##   }

## ------------------------------------------------------------------------
dayloop2 = function(temp){
  
  for (i in 1:nrow(temp)){    
    
    if (i > 1) {             
      if ((temp[i,6] == temp[i-1,6]) & (temp[i,3] == temp[i-1,3])) { 
        temp[i,10] = temp[i,9] + temp[i-1,10]                    
      } 
      else {
        temp[i,10] = temp[i,9]                                    
      }
    } 
    else {
      temp[i,10] = temp[i,9]
    }
  }
  return(temp)
}

(t1=system.time(dayloop2(X)))

## ------------------------------------------------------------------------
dayloop2_A = function(temp){
  
  res = numeric(nrow(temp))
  
  for (i in 1:nrow(temp)){    
    
    if (i > 1) {             
      if ((temp[i,6] == temp[i-1,6]) & (temp[i,3] == temp[i-1,3])) { 
        res[i] = temp[i,9] + res[i-1]                   
      } else {
        res[i] = temp[i,9]                                    
      }
    } else {
      res[i] = temp[i,9]
    }
  }
  temp$V10 = res
  return(temp)
}

(t2=system.time(dayloop2_A(X)))

## ------------------------------------------------------------------------
set.seed(2)
x=sample(1:5,20,replace = T)
x

## ------------------------------------------------------------------------
y=FALSE
for(i in 2:20){
  if(x[i]==x[i-1]){
    y[i]=TRUE
  }else{
    y[i]=FALSE
  }
}
y

## ------------------------------------------------------------------------
x[-1]

## ------------------------------------------------------------------------
x[-length(x)]

## ------------------------------------------------------------------------
z=c(FALSE,x[-1]==x[-length(x)])
z

## ------------------------------------------------------------------------
dayloop2_B = function(temp){
  # Using the idea explained above to do comparsion without using for loop. the result 
  # is stored in vector cond.
  cond = c(FALSE, (temp[-nrow(temp),6] == temp[-1,6]) & 
             (temp[-nrow(temp),3] == temp[-1,3]))
  # along with that we are also getting rid of assigning values of res to temp[,9]
  # when condition is not true. Instead of that , from the very beginning we are
  # assigning it equal to temp[,9]. We'll change it whenever the condition is true
  res = temp[,9]
  
  for (i in 1:nrow(temp)) {
    if (cond[i]) {res[i] = temp[i,9] + res[i-1]}
  }
  
  temp$new = res
  return(temp)
  
}

(t3=system.time(dayloop2_B(X)))

## ------------------------------------------------------------------------
dayloop2_c = function(temp){
  cond = c(FALSE, (temp[-nrow(temp),6] == temp[-1,6]) & 
             (temp[-nrow(temp),3] == temp[-1,3]))
  
  res = temp[,9]
  
  # previously we were running for loop for all rows in data frame
  k=1:nrow(temp)
  # we'll subset it to only those value where the condition is true
  # because we need to change the value of "res" in only those cases
  
  k=k[cond]
  
  for (i in k) {
    res[i] = res[i] + res[i-1]
  }
  
  temp$new = res
  return(temp)
}

(t4=system.time(dayloop2_c(X)))


